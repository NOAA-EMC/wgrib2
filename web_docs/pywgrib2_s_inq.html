<!iOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>Climate Prediction Center - pywgrib2: inq(..)</title>
  <meta http-equiv=Content-Type content="text/html; charset=windows-1252">
  <meta content="NCEP Web Team" name="GENERATOR">
  <meta name="keywords"
  content="Climate,Climate Prediction Center,National Weather Service,National Oceanic &amp; Atmospheric Administration, NOAA,El Nino,La Nina,ENSO,climate outlooks,El Nino Advisory,La Nina Advisory,droughts,hurricanes,Threats Assessment,Drought Assessment,Drought Monitor,CLimate Diagnostics Bulletin,6-10 day outlook,8-14 day outlook, 6-10 day forecast,8-14 day forecast,MRF,UV Index,North Atlantic Oscillation,NAO,Pacific Decadal Oscillation,PDO,sea surface temperatures,SST,Palmer Drought Severity Index, African Desk,outlooks,expert assessments,monitoring,advisories,stratosphere,temperature,precipitation,snow cover,snowfall,soil moisture,OLR,ozone,degree days,CLIMATE,CLIMATE PREDICTION CENTER,EL NINO,LA NINA, CLIMATE OUTLOOKS,HURRICANES,ASSESSMENTS,SNOW,STRATOSPHERE,DROUGHT,OZONE,DEGREE DAYS">
  <link href="/nwscwi/main.css" type="text/css" rel="STYLESHEET">
</head>
<body leftmargin="0" background="/nwscwi/background.gif" 
      topmargin="0" rightmargin="0" marginheight="0" marginwidth="0">
<table cellspacing="0" cellpadding="0" width="100%" background="/nwscwi/topbanner.jpg" border="0">
  <tr>
    <td align="right" height="19">
      <a href="#contents"><img height="1" alt="Skip Navigation Links"
         src="/nwscwi/skipgraphic.gif" width="1" border="0"></a>
      <a href="https://www.nws.noaa.gov/" class="homepagelinks"><span class="nwslink">www.nws.noaa.gov</span></a>&nbsp;</td>
  </tr>
</table>
<table cellspacing="0" cellpadding="0" width="100%" border="0">
  <tr>
    <td rowspan="2"><a href="https://www.noaa.gov/">
      <img height="78" alt="NOAA logo - Click to go to the NOAA home page"
      src="/nwscwi/noaaleft.jpg" width="85" border="0"></a></td>
    <td align="left"><img height="20" alt="National Weather Service"
      src="/nwscwi/nws_title.jpg" width="500" border="0"></td>
    <td rowspan="2" width="100%" background="/nwscwi/ncep_bkgrnd.jpg">&nbsp;</td>
    <td rowspan="2" align="right"><a href="https://www.nws.noaa.gov/">
      <img height="78" alt="NWS logo - Click to go to the NWS home page"
      src="/nwscwi/nwsright.jpg" width="85" border="0"></a></td>
  </tr>
  <tr>
    <td><img height="58" alt="Climate Prediction Center" src="/nwscwi/cpc.jpg"
             width="500" border="0"></td>    <!-- Put your center header image here. -->
  </tr>
</table>
<table cellspacing="0" cellpadding="0" width="100%" background="/nwscwi/navbkgrnd.gif" border="0">
  <tr>
    <td align="left" valign="top" width="94"><img height="23" alt="" src="/nwscwi/navbarleft.jpg" width
="94" border="0"></td>
    <td class="nav" align="center" width="15%">
      <a href="/products/site_index.html" class="menu">Site Map</a></td> <!-- Build a text only sitemap, and link to it via this
                                                    sitemap button just below the banner.
                                                    The sitemap should include a heirarchy of links
                                                    from NOAA, to the NWS, to NCEP, and then through your site. -->
    <td class="nav" align="right" width="15%">
      <a href="https://www.nws.noaa.gov/pa/" class="menu">News</a></td>
    <td class="nav" id="menuitem" align="right" width="20%">
      <a href="https://weather.gov/organization.php" class="menu">Organization</a></td>
    <td class="yellow" align="right" width="20%">
      <form action="https://www.firstgov.gov/fgsearch/index.jsp" name="query">
        <label for="search">Search</label>&nbsp;</td>
    <td align="left" class="searchinput" width="20%" nowrap>
      <input type="hidden" name="parsed" value="true">
      <input type="hidden" name="rn" value="3">
      <input type="hidden" name="in0" value="domain">
      <input type="hidden" name="dom0" value="nws.noaa.gov, weather.gov, wrh.noaa.gov, srh.noaa.gov, crh.noaa.gov, prh.noaa.gov, arh.noaa.gov, alaska.net/~nwsar, erh.noaa.gov, ncep.noaa.gov, wwb.noaa.gov, spc.noaa.gov, nhc.noaa.gov, sec.noaa.gov, aviationweather.gov, aviationweather.noaa.gov, weather.noaa.gov, roc.noaa.gov, nohrsc.nws.gov, nwstc.noaa.gov, wdtb.noaa.gov, npmoc.navy.mil, ndbc.noaa.gov">
      <input type="text" name="mw0" value="All NWS Search" id="search" size="20" maxlength="256">
      <input type="submit" name="Go2" value="Go"></td>
    <td width="10%">&nbsp;</form></td>
    <td align="right" valign="bottom" width="24"><img height="23" alt="" src="/nwscwi/navbarendcap.jpg"
 width="24" border="0"></td>
  </tr>
</table>
<table cellspacing="0" cellpadding="0" width="670" border="0">
  <tr valign="top">
    <td width="137"><br>
      <table cellspacing="0" cellpadding="2" width="137" border="0">
        <!-- Do not remove this section. You will need this when the City,St/zip search is implemented nationwide.-->
        <!-- <tr align="left" valign="top">
                <td class="searchinput">
                  <div id="Layer2" style="position:absolute; width:200px; height:115px; z-index:2; visibility: hidden">Search by city or zip code. Press enter or select the go button to submit request</div>
                  <form method="POST" action="https://www.srh.noaa.gov/zipcity.php">
                  <span class="yellow">Local forecast by<br>&quot;City, St&quot; or Zip Code</span><br>
                  <input type="text" name="inputstring" size="9" value="City, St">
                  <input type="submit" name="Go2" value="Go"></form></td>
        </tr> -->
         <tr>
          <td class="searchinput" align="left">
            <form action="https://www.firstgov.gov/fgsearch/index.jsp" name="query">
             <label for="search"><span class="yellow">CPC Search</span></label>
              <input type="hidden" name="parsed" value="true">
              <input type="hidden" name="rn" value="3">
              <input type="hidden" name="in0" value="domain">
              <input type="hidden" name="dom0" value="www.cpc.ncep.noaa.gov">
              <input type="text" name="mw0" id="search"  size="10" maxLength="256" value="CPC search">&nbsp;
              <input type="submit" name="Go2" value="Go">
          </form></td>
         </tr>
        <tr>
          <td class="white">
            <span class="yellow">About Us</span><br>
            &nbsp;&nbsp;&nbsp;<a href="/information/who_we_are/mission.html" class="menu">Our Mission</a><br>
            &nbsp;&nbsp;&nbsp;<a href="/information/who_we_are/" class="menu">Who We Are</a><br><br>
            <span class="yellow">Contact Us</span><br>
            &nbsp;&nbsp;&nbsp;<a href="/information/personnel/contacts.html" class="menu">CPC Information</a><br>
            &nbsp;&nbsp;&nbsp;<a href="/comment-form.html" class="menu">CPC Web Team</a><br><br>           
          </td>
        </tr>
      </table>
    </td>
    <td valign="top" align="center" width="533"><a name="contents"></a>

<!-- Begin content area -->

<table border="0" cellPadding="2" cellSpacing="0" align="center" width="533">
 <tr><td>&nbsp;</td></tr>
 <tr>
  <td>
   <font face="Verdana,arial,serif" size="1"><a href="/index.html" class="homepagelinks"><strong>HOME</strong></a> &gt; <a href="/products/monitoring_and_data" class="homepagelinks">Monitoring_and_Data</a> &gt; <a href="/products/monitoring_and_data/oadata.html" class="homepagelinks">Oceanic and Atmospheric Data</a> &gt; <a href="/products/wesley/" class="homepagelinks">Reanalysis: Atmospheric Data</a> &gt; pywgrib2: inq(..)</font>
  </td>
 </tr>
 <tr><td>&nbsp;</td></tr>
 <tr>
  <td>
<font color=red>
<h3 align=center>pywgrib2: inq(..)</h3>
</font>


<h3>Introduction</h3>

<p>
Pywgrib_s.inq(..) does an inquiry about a grib file.  At its most basic level,
you give zero or more search terms, and the inquiry says how many fields matched
your search terms.  You can also get the metadata and grid information for all the matched
fields.  For the last match, you can get additonal information like,

<ol>
<li> nx         number of grid points in longitudinal direction
<li> ny         number of grid points in latitudinal irection
<li> ndata      number of grid points in grid
<li> msgno      grib messsage number
<li> submsgno   grib submessage number
<li> data       (optional) grid point values in WE:SN order
<li> lon        (optional) longitude values of grid in WE:SN order
<li> lat        (optional) latitude values of grid in WE:SN order
</ol>

<h3 align='center'>Arguments to inq()</h3>

<h3 align='center'><font color='red'>File to Read: Grib file</font></h3>
<p> The function, inq, has only one positional parameter, a name of a grib file.
All other parameters are optional.  If you call inq with no options, then
there are no constraints of the fields that match.  The call will return the
number of fields in the file.

<pre>
>>> import pywgrib2_s
finished loading libraries
pywgrib2_s v0.0.10 11-9-2020 w. ebisuzaki
>>> pywgrib2_s.inq('a.grb')
9796
>>> 
</pre>

<h3 align='center'><font color='red'>Specifying Fields to Examine</font></h3>

<h3 align='center'>By Search Terms: Text Searchs</h3>
<p>
After the grib file, you can enter any number of text search terms.
The search terms will be compared with the inventory file or automatically
generated inventory file if an inventory is not provided.

<p> Each line of the inventory file corresponds to a grib message or submessage.
For a search to be sucessful, each search term must be found in the same line.
The comparison is done as a text string unless the option Regex is set to True.
In that case, a regular expression comparison is done.

<h3 align='center'>By Record number, byte location: select='select string'</h3>

The optional select='select string', allows one to select a specific field by grib message
number or byte location.  Since a grib message may have submessages, you may have
to indicate which submessage is being selected.  The byte location option is faster
because the routine doesn't have to read from the start of the file to find the selected
grib message.

<p> You can select the grib message to process by the select string option.
The format of the string is
<or>
<li> 'N.M' where N is the grib message number and M is the submessage number
<li> 'N' where N is the grib message number (M is assumed to be one)
<li> 'N.M:byte_location where the byte location of the message starting from zero, N is unused
<li> 'N:byte_location where the byte location of the message starting from zero and M is one
</or>

<h3 align='center'><font color='red'>Faster with inv file</font></h3>

<h3 align='center'>Optional: inv='inv file name'</h3>

<p>The inv file is a human readable index file.  With experience,
the inventory becomes <a href="./default_inv.html">comprehensible</a>.
If a inv file is specified, the inventory file will be used to find
the matching messages.  This is much faster than reading the grib
file to find the matching grib messages.
<p> You can use any 1-line/field  wgrib2 inventory for your "inv file".  
However, it is recommended that you use the inventory from the 
-Match_inv option from wgrib2 because then the match results with/without
an inventory file will be the same.

<h3 align='center'><font color='red'>Inquires: What's in selected fields</font></h3>


<h3 align='center'>Grid point values: Data=Logical</h3>
<p>
If Data is True, the grid point values of the last match are saved
in pywgrib2_s.data as a numpy ndarray in WE:SN order.
The default value is Data=False.  If no grid point values are saved,
the value of pywgrib2_s.data is None.  Currently the ndarray uses
float32 but that will change to float64 if/when wgrib2 moves to float64
data.

<h3 align='center'>Latitude, Longitude for grid points: Latlon=Logical</h3>
<p>
If Latlon is True, the latitude and longitude values of the last match are saved
in pywgrib2_s.lat and pywgrib2_s.lon as a numpy ndarray in WE:SN order.
The default value is Latlon=False.  If the locations are not requested
or cannot be calculated, the value of pywgrib2_s.lat and pywgrib2_s.lon are None.
Currently the ndarray uses float32 but that will change to float64 in the future.

<h3 align='center'>Contents of Grib Sections: SecN=Logical, N=0..8</h3>
<p>
A grib message (record) consists of sections 0..8.  If SecN is True, the
byte values of SecN are stored in pywgrib2_s.secN.  The default value
of SecN is False.  Using the data in pywgrib2_s.secN requires a knowledge
about grib.


<h3 align='center'>List of the matched fields: Matched=Logical</h3>
<p>
If Matched is True, a list of the fields matched are saved in
pywgrib2_s.matched.  The number of matches is given by the
return value if pywgrib2_s.inq(..) and by len(match) when Matched is True.
The default value of Matched is False.

<h3 align='center'>List of the grid definitions of the matched fields: Grid_defn=Logical</h3>
<p>
If Grid_defn is True, a list of the grid definitinos of the matched fields is
saved as a list in pywgrib2_s.grid_defn. The number of matches is given by the
return value if pywgrib2_s.inq(..) and by len(grid_defn) when Grid_defn is True.
The default value of Matched is False.

<h3 align='center'><font color='red'>Saving the matched fields</font></h3>

<h3 align='center'>Save matched fields in grib: grib='output grib file'</h3>
If grib is not '', the grib messages that are matched are copied to the 'output grib file'.
If the 'output grib file' has been not opened, the default is to create a new file.
If the input grib message has submessages, only the submessage that is matched is written
to the file grib.

<h3 align='center'>Open 'grib file' as append: Append_grib=Logical</h3>
If you wish to append grib message to an existing 'output grib file',
you need to add the parameter Append_grib=True.  The default value is False.
Otherwise the initial open of 'output grib file' will create a new file.

<h3 align='center'>Saving matched fields in binary: bin='binary file'</h3>
If bin is not '', the grid point data will be written to 'binary file'.  The format is the native
single precision with no headers or trailers.  The data will be written in WE:SN order.
If the 'binary file' has not been opened, the default is to create a new file.

<h3 align='center'>Open 'binary file' as append: Append_bin=Logical</h3>
If you wish to append binary data to an existing 'binary file',
you need to add the parameter Append_bin=True.  The default value is False, and
the initial open of 'binary file' will create a new file.


<h3 align='center'><font color='red'>Misc</font></h3>


<h3 align='center'>Text search terms are regular expressions: Regex=Logical</h3>
<p>
By default, the text search is done using "fixed strings".  The search is
done using no wildcards or metacharacters like the fgrep utility. If Regex is set to True,
the search term is a "regular" expression like the egrep utility.

<h3 align='center'>Read/Search sequentially: Sequential=integer</h3>
<p>
Often you need to process a file sequentially; for example, copy all the
temperatures fields to another file.  Sometimes, you want to process a file
sort of sequentially; for example, find the next zonal wind, find the
corresponding meridional wind and write both files to a file, and repeat
until there are now more zonal winds.  Pywgrib2_s handles the second
set which is a superset of the first.

<p> Pywgrib2_s.write(..) can read a inventory file sequentially.  To handle
the above second case, you create two inventory files.  The first inventory
file is read sequentially.  The second inventory file is to find the associated
fields.

<p> To start a sequential read, you add "sequential=0" in the call to pywgrib2_s.write(..).
For the remainder of the sequential reads, "sequential=N" where N is a integer greater than zero.



<p>

Add more text here.

<p>

<a href='./pywgrib2_s.html'>overview</a>
<a href='./pywgrib2_s_read_inv.html'>back</a>
<a href='./pywgrib2_s_write.html'>next</a>


</td>
</tr>


<!--  End of Content area  -->
<!--   ...............................................Footer Portion.........................................    -->
 <tr>
  <td>
   <table width="500">
    <tr>
     <td colSpan="3"><hr></td>
    </tr>
    <TR vAlign="top">
     <TD class="gray">
      <A href="https://www.noaa.gov/" class="homepagelinks"><SPAN class="gray">NOAA/</SPAN></A>
      <A href="https://www.nws.noaa.gov/" class="homepagelinks"><SPAN class="gray">National Weather Service</SPAN></A><BR>
      <A href="https://www.ncep.noaa.gov/" class="homepagelinks"><SPAN class="gray">National Centers for Environmental Prediction</SPAN></a><BR>
        Climate Prediction Center<BR>
        5830 University Research Court<BR>
        College Park, Maryland 20740<BR>
      <A href="/comment-form.html" class="homepagelinks"><SPAN class="gray">Climate Prediction Center Web Team</SPAN></A><BR>
        Page last modified: 8/2020 8/2022
     </TD>
     <TD>
      <A href="https://weather.gov/disclaimer.php" class="homepagelinks"><SPAN class="gray">Disclaimer</SPAN></A>
     </TD>
     <TD align="right">
      <A href="https://weather.gov/privacy.php" class="homepagelinks"> <SPAN class="gray">Privacy Policy</SPAN></A>
     </TD>
    </TR>
   </table>
  </td>
 </tr>
</table>
</td>
</tr>
</table>
</body>
</html>

