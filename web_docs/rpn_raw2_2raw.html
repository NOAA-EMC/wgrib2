<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>Climate Prediction Center - wgrib2: -rpn raw2, -rpn 2raw</title>
  <meta http-equiv=Content-Type content="text/html; charset=windows-1252">
  <meta content="NCEP Web Team" name="GENERATOR">
  <meta name="keywords"
  content="Climate,Climate Prediction Center,National Weather Service,National Oceanic &amp; Atmospheric Administration, NOAA,El Nino,La Nina,ENSO,climate outlooks,El Nino Advisory,La Nina Advisory,droughts,hurricanes,Threats Assessment,Drought Assessment,Drought Monitor,CLimate Diagnostics Bulletin,6-10 day outlook,8-14 day outlook, 6-10 day forecast,8-14 day forecast,MRF,UV Index,North Atlantic Oscillation,NAO,Pacific Decadal Oscillation,PDO,sea surface temperatures,SST,Palmer Drought Severity Index, African Desk,outlooks,expert assessments,monitoring,advisories,stratosphere,temperature,precipitation,snow cover,snowfall,soil moisture,OLR,ozone,degree days,CLIMATE,CLIMATE PREDICTION CENTER,EL NINO,LA NINA, CLIMATE OUTLOOKS,HURRICANES,ASSESSMENTS,SNOW,STRATOSPHERE,DROUGHT,OZONE,DEGREE DAYS">
  <link href="/nwscwi/main.css" type="text/css" rel="STYLESHEET">
</head>
<body leftmargin="0" background="/nwscwi/background.gif" 
      topmargin="0" rightmargin="0" marginheight="0" marginwidth="0">
<table cellspacing="0" cellpadding="0" width="100%" background="/nwscwi/topbanner.jpg" border="0">
  <tr>
    <td align="right" height="19">
      <a href="#contents"><img height="1" alt="Skip Navigation Links"
         src="/nwscwi/skipgraphic.gif" width="1" border="0"></a>
      <a href="https://www.nws.noaa.gov/" class="homepagelinks"><span class="nwslink">www.nws.noaa.gov</span></a>&nbsp;</td>
  </tr>
</table>
<table cellspacing="0" cellpadding="0" width="100%" border="0">
  <tr>
    <td rowspan="2"><a href="https://www.noaa.gov/">
      <img height="78" alt="NOAA logo - Click to go to the NOAA home page"
      src="/nwscwi/noaaleft.jpg" width="85" border="0"></a></td>
    <td align="left"><img height="20" alt="National Weather Service"
      src="/nwscwi/nws_title.jpg" width="500" border="0"></td>
    <td rowspan="2" width="100%" background="/nwscwi/ncep_bkgrnd.jpg">&nbsp;</td>
    <td rowspan="2" align="right"><a href="https://www.nws.noaa.gov/">
      <img height="78" alt="NWS logo - Click to go to the NWS home page"
      src="/nwscwi/nwsright.jpg" width="85" border="0"></a></td>
  </tr>
  <tr>
    <td><img height="58" alt="Climate Prediction Center" src="/nwscwi/cpc.jpg"
             width="500" border="0"></td>    <!-- Put your center header image here. -->
  </tr>
</table>
<table cellspacing="0" cellpadding="0" width="100%" background="/nwscwi/navbkgrnd.gif" border="0">
  <tr>
    <td align="left" valign="top" width="94"><img height="23" alt="" src="/nwscwi/navbarleft.jpg" width
="94" border="0"></td>
    <td class="nav" align="center" width="15%">
      <a href="/products/site_index.html" class="menu">Site Map</a></td> <!-- Build a text only sitemap, and link to it via this
                                                    sitemap button just below the banner.
                                                    The sitemap should include a heirarchy of links
                                                    from NOAA, to the NWS, to NCEP, and then through your site. -->
    <td class="nav" align="right" width="15%">
      <a href="https://www.nws.noaa.gov/pa/" class="menu">News</a></td>
    <td class="nav" id="menuitem" align="right" width="20%">
      <a href="https://weather.gov/organization.php" class="menu">Organization</a></td>
    <td class="yellow" align="right" width="20%">
      <form action="https://www.firstgov.gov/fgsearch/index.jsp" name="query">
        <label for="search">Search</label>&nbsp;</td>
    <td align="left" class="searchinput" width="20%" nowrap>
      <input type="hidden" name="parsed" value="true">
      <input type="hidden" name="rn" value="3">
      <input type="hidden" name="in0" value="domain">
      <input type="hidden" name="dom0" value="nws.noaa.gov, weather.gov, wrh.noaa.gov, srh.noaa.gov, crh.noaa.gov, prh.noaa.gov, arh.noaa.gov, alaska.net/~nwsar, erh.noaa.gov, ncep.noaa.gov, wwb.noaa.gov, spc.noaa.gov, nhc.noaa.gov, sec.noaa.gov, aviationweather.gov, aviationweather.noaa.gov, weather.noaa.gov, roc.noaa.gov, nohrsc.nws.gov, nwstc.noaa.gov, wdtb.noaa.gov, npmoc.navy.mil, ndbc.noaa.gov">
      <input type="text" name="mw0" value="All NWS Search" id="search" size="20" maxlength="256">
      <input type="submit" name="Go2" value="Go"></td>
    <td width="10%">&nbsp;</form></td>
    <td align="right" valign="bottom" width="24"><img height="23" alt="" src="/nwscwi/navbarendcap.jpg"
 width="24" border="0"></td>
  </tr>
</table>
<table cellspacing="0" cellpadding="0" width="670" border="0">
  <tr valign="top">
    <td width="137"><br>
      <table cellspacing="0" cellpadding="2" width="137" border="0">
        <!-- Do not remove this section. You will need this when the City,St/zip search is implemented nationwide.-->
        <!-- <tr align="left" valign="top">
                <td class="searchinput">
                  <div id="Layer2" style="position:absolute; width:200px; height:115px; z-index:2; visibility: hidden">Search by city or zip code. Press enter or select the go button to submit request</div>
                  <form method="POST" action="https://www.srh.noaa.gov/zipcity.php">
                  <span class="yellow">Local forecast by<br>&quot;City, St&quot; or Zip Code</span><br>
                  <input type="text" name="inputstring" size="9" value="City, St">
                  <input type="submit" name="Go2" value="Go"></form></td>
        </tr> -->
         <tr>
          <td class="searchinput" align="left">
            <form action="https://www.firstgov.gov/fgsearch/index.jsp" name="query">
             <label for="search"><span class="yellow">CPC Search</span></label>
              <input type="hidden" name="parsed" value="true">
              <input type="hidden" name="rn" value="3">
              <input type="hidden" name="in0" value="domain">
              <input type="hidden" name="dom0" value="www.cpc.ncep.noaa.gov">
              <input type="text" name="mw0" id="search"  size="10" maxLength="256" value="CPC search">&nbsp;
              <input type="submit" name="Go2" value="Go">
          </form></td>
         </tr>
        <tr>
          <td class="white">
            <span class="yellow">About Us</span><br>
            &nbsp;&nbsp;&nbsp;<a href="/information/who_we_are/mission.html" class="menu">Our Mission</a><br>
            &nbsp;&nbsp;&nbsp;<a href="/information/who_we_are/" class="menu">Who We Are</a><br><br>
            <span class="yellow">Contact Us</span><br>
            &nbsp;&nbsp;&nbsp;<a href="/information/personnel/contacts.html" class="menu">CPC Information</a><br>
            &nbsp;&nbsp;&nbsp;<a href="/comment-form.html" class="menu">CPC Web Team</a><br><br>           
          </td>
        </tr>
      </table>
    </td>
    <td valign="top" align="center" width="533"><a name="contents"></a>

<!-- Begin content area -->

<table border="0" cellPadding="2" cellSpacing="0" align="center" width="533">
 <tr><td>&nbsp;</td></tr>
 <tr>
  <td>
   <font face="Verdana,arial,serif" size="1"><a href="/index.html" class="homepagelinks"><strong>HOME</strong></a> &gt; <a href="/products/monitoring_and_data" class="homepagelinks">Monitoring_and_Data</a> &gt; <a href="/products/monitoring_and_data/oadata.html" class="homepagelinks">Oceanic and Atmospheric Data</a> &gt; <a href="/products/wesley/" class="homepagelinks">Reanalysis: Atmospheric Data</a> &gt; wgrib2 -rpn raw2, -rpn 2raw</font>
  </td>
 </tr>
 <tr><td>&nbsp;</td></tr>
 <tr>
  <td>
<font color=red>
<h3 align=center>wgrib2 macros: -rpn raw2, -rpn 2raw</h3>
</font>


<h3>Introduction</h3>

<p>
Mosts of the operators for <font color=red>-rpn</font> are simple and need minimal explanation.
However, the <font color=red>raw2</font>, and <font color=red>2raw</font> require more explanation.
<p>
In grib2 files, the grid point data is stored sequentially and have to be mapped to the grid.
Grib2 defines many methods (scan orders) of mapping the grid point.  There are fortran order,
C order, West to east, east to west, south to north and north to south.  The rows can 
have a uniform direction or the even rows have a direction and the odd rows have another
direction.  Then you can add on the various Arakawa grids, and everything is messy.

<p>
To avoid this mess, the default mode in wgrib2 is to convert the internal grids to WE:SN order.
It makes life easier for the users and easier for the 
developers.  You are encouraged to use WE:SN order because it is a requirement for wgrib2's 
geolocation routines.  (I.e., wgrib2 requires WE:SN order in order to calculate the grid's 
latitude and longitude.)  The only exception to this rule is the <font color=red>-new_grid</font> 
option which requires the data to be in raw order (output order=raw).  This option is
an exception because <font color=red>-new_grid</font> expects that data to be in raw order.

<p> 
To alter the internal scan order, you can use the <font color=red>-order</font> option.

<pre>
-sh-4.1$ wgrib2 gep19.t00z.pgrb2af180 -d 1 -V
1:0:vt=2009061212:200 mb:180 hour fcst:HGT Geopotential Height [gpm]:ENS=+19
    ndata=65160:undef=0:mean=11760.3:min=10393.5:max=12525
    grid_template=0:winds(N/S):
	lat-lon grid:(360 x 181) units 1e-06 input WE:NS output WE:SN res 48
	lat 90.000000 to -90.000000 by 1.000000
	lon 0.000000 to 359.000000 by 1.000000 #points=65160
 -- the grib files is WE:NS order (input WE:NS)
 -- the internal grid is WE:SN order (output WE:SN)

-sh-4.1$ wgrib2 gep19.t00z.pgrb2af180 -d 1 -V -order raw
1:0:vt=2009061212:200 mb:180 hour fcst:HGT Geopotential Height [gpm]:ENS=+19
    ndata=65160:undef=0:mean=11760.3:min=10393.5:max=12525
    grid_template=0:winds(N/S):
	lat-lon grid:(360 x 181) units 1e-06 input WE:NS output raw res 48
	lat 90.000000 to -90.000000 by 1.000000
	lon 0.000000 to 359.000000 by 1.000000 #points=65160
 -- the grib files is WE:NS order (input WE:NS)
 -- the internal grid is raw order (output raw), which means the same as input scan order

-sh-4.1$ wgrib2 gep19.t00z.pgrb2af180 -d 1 -V -order we:sn
1:0:vt=2009061212:200 mb:180 hour fcst:HGT Geopotential Height [gpm]:ENS=+19
    ndata=65160:undef=0:mean=11760.3:min=10393.5:max=12525
    grid_template=0:winds(N/S):
	lat-lon grid:(360 x 181) units 1e-06 input WE:NS output WE:SN res 48
	lat 90.000000 to -90.000000 by 1.000000
	lon 0.000000 to 359.000000 by 1.000000 #points=65160
 -- the grib files is WE:NS order (input WE:NS)
 -- the internal grid is WE:SN order (output WE:SN)

-sh-4.1$ wgrib2 gep19.t00z.pgrb2af180 -d 1 -V -order we:ns
1:0:vt=2009061212:200 mb:180 hour fcst:HGT Geopotential Height [gpm]:ENS=+19
    ndata=65160:undef=0:mean=11760.3:min=10393.5:max=12525
    grid_template=0:winds(N/S):
	lat-lon grid:(360 x 181) units 1e-06 input WE:NS output WE:NS res 48
	lat 90.000000 to -90.000000 by 1.000000
	lon 0.000000 to 359.000000 by 1.000000 #points=65160
 -- the grib files is WE:NS order (input WE:NS)
 -- the internal grid is WE:SN order (output NS)

-sh-4.1$ wgrib2 reduced_gaussian_surface_jpeg.grib2 -d 1 -V
1:0:vt=2007032312:surface:anl:TMP Temperature [K]:
    ndata=6114:undef=0:mean=285.342:min=210.255:max=317.485
    grid_template=40:winds(N/S):
	thinned global Gaussian grid: (-1 x 64) units 1e-06 input WE:NS output raw
	number of latitudes between pole-equator=32 #points=6114
	lat 87.864000 to -87.864000
	lon 0.000000 to 357.188000 
	#grid points by latitude: 20 27 36 40 45 50 60 64 72 75 80 90 90
	 96 100 108 108 120 120 120 128 128 128 128 128 128 128 128 128 128 128 128 128
	 128 128 128 128 128 128 128 128 128 128 128 120 120 120 108 108 100 96 90 90
	 80 75 72 64 60 50 45 40 36 27 20
 -- in this file, the grid dimension is -1 x 64.  This is a thinned Gaussian grid, and
    nlongitude is variable.  The output scan order is raw.

</pre>


<p>
The <font color=red>raw2</font> operator is short for "raw scan order 2 output scanning order", and
<font color=red>2raw</font> is short for "output scanning mode 2 raw scan mode".
The <font color=red>raw2</font> applies the mapping that goes from the file's scanning mode
to the interal scanning mode (default WE:SN). 
The <font color=red>2raw</font>  applies the inverse mapping.


<h3>Example 1</h3>

<pre>
$ wgrib2 IN.grb -d 1 -rpn "rcl_lon:2raw" -set_var geolon -bin out \
   -rpn "rcl_lat:2raw" -set_var geolat -bin out 

This write the longitude and latitude in binary format to file "out".
The lon/lat are written in the same format as the input file.
</pre>

<h3>Example 2</h3>

<pre>
SST0.grb - SST in grib format (template) in WE:NS order
SST.bin  - new SST in binary format, and WE:NS scan order
SST.grb  - new SST in grib format

$ wgrib2 SST0.grb -import_bin SST.bin -rpn "raw2" -set_date 2020010100 -grib_out SST.grb

or 

$ wgrib2 SST0.grb -order raw -import_bin SST.bin -set_date 2020010100 -grib_out SST.grb
</pre>


</td>
</tr>


<!--  End of Content area  -->
<!--   ...............................................Footer Portion.........................................    -->
 <tr>
  <td>
   <table width="500">
    <tr>
     <td colSpan="3"><hr></td>
    </tr>
    <TR vAlign="top">
     <TD class="gray">
      <A href="https://www.noaa.gov/" class="homepagelinks"><SPAN class="gray">NOAA/</SPAN></A>
      <A href="https://www.nws.noaa.gov/" class="homepagelinks"><SPAN class="gray">National Weather Service</SPAN></A><BR>
      <A href="https://www.ncep.noaa.gov/" class="homepagelinks"><SPAN class="gray">National Centers for Environmental Prediction</SPAN></a><BR>
        Climate Prediction Center<BR>
        5830 University Research Court<BR>
        College Park, Maryland 20740<BR>
      <A href="/comment-form.html" class="homepagelinks"><SPAN class="gray">Climate Prediction Center Web Team</SPAN></A><BR>
        Page created 3/30/2020
     </TD>
     <TD>
      <A href="https://weather.gov/disclaimer.php" class="homepagelinks"><SPAN class="gray">Disclaimer</SPAN></A>
     </TD>
     <TD align="right">
      <A href="https://weather.gov/privacy.php" class="homepagelinks"> <SPAN class="gray">Privacy Policy</SPAN></A>
     </TD>
    </TR>
   </table>
  </td>
 </tr>
</table>
</td>
</tr>
</table>
</body>
</html>

