<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> <html>
<head>
  <title>Climate Prediction Center - wgrib2: grib2 utility</title>
  <meta http-equiv=Content-Type content="text/html; charset=windows-1252">
  <meta content="NCEP Web Team" name="GENERATOR">
  <meta name="keywords"
  content="Climate,Climate Prediction Center,National Weather Service,National Oceanic &amp; Atmospheric Administration, NOAA,El Nino,La Nina,ENSO,climate outlooks,El Nino Advisory,La Nina Advisory,droughts,hurricanes,Threats Assessment,Drought Assessment,Drought Monitor,CLimate Diagnostics Bulletin,6-10 day outlook,8-14 day outlook, 6-10 day forecast,8-14 day forecast,MRF,UV Index,North Atlantic Oscillation,NAO,Pacific Decadal Oscillation,PDO,sea surface temperatures,SST,Palmer Drought Severity Index, African Desk,outlooks,expert assessments,monitoring,advisories,stratosphere,temperature,precipitation,snow cover,snowfall,soil moisture,OLR,ozone,degree days,CLIMATE,CLIMATE PREDICTION CENTER,EL NINO,LA NINA, CLIMATE OUTLOOKS,HURRICANES,ASSESSMENTS,SNOW,STRATOSPHERE,DROUGHT,OZONE,DEGREE DAYS">
  <link href="/nwscwi/main.css" type="text/css" rel="STYLESHEET">
</head>
<body leftmargin="0" background="/nwscwi/background.gif" 
      topmargin="0" rightmargin="0" marginheight="0" marginwidth="0">
<table cellspacing="0" cellpadding="0" width="100%" background="/nwscwi/topbanner.jpg" border="0">
  <tr>
    <td align="right" height="19">
      <a href="#contents"><img height="1" alt="Skip Navigation Links"
         src="/nwscwi/skipgraphic.gif" width="1" border="0"></a>
      <a href="https://www.nws.noaa.gov/" class="homepagelinks"><span class="nwslink">www.nws.noaa.gov</span></a>&nbsp;</td>
  </tr>
</table>
<table cellspacing="0" cellpadding="0" width="100%" border="0">
  <tr>
    <td rowspan="2"><a href="https://www.noaa.gov/">
      <img height="78" alt="NOAA logo - Click to go to the NOAA home page"
      src="/nwscwi/noaaleft.jpg" width="85" border="0"></a></td>
    <td align="left"><img height="20" alt="National Weather Service"
      src="/nwscwi/nws_title.jpg" width="500" border="0"></td>
    <td rowspan="2" width="100%" background="/nwscwi/ncep_bkgrnd.jpg">&nbsp;</td>
    <td rowspan="2" align="right"><a href="https://www.nws.noaa.gov/">
      <img height="78" alt="NWS logo - Click to go to the NWS home page"
      src="/nwscwi/nwsright.jpg" width="85" border="0"></a></td>
  </tr>
  <tr>
    <td><img height="58" alt="Climate Prediction Center" src="/nwscwi/cpc.jpg"
             width="500" border="0"></td>    <!-- Put your center header image here. -->
  </tr>
</table>
<table cellspacing="0" cellpadding="0" width="100%" background="/nwscwi/navbkgrnd.gif" border="0">
  <tr>
    <td align="left" valign="top" width="94"><img height="23" alt="" src="/nwscwi/navbarleft.jpg" width
="94" border="0"></td>
    <td class="nav" align="center" width="15%">
      <a href="/products/site_index.html" class="menu">Site Map</a></td> <!-- Build a text only sitemap, and link to it via this
                                                    sitemap button just below the banner.
                                                    The sitemap should include a heirarchy of links
                                                    from NOAA, to the NWS, to NCEP, and then through your site. -->
    <td class="nav" align="right" width="15%">
      <a href="https://www.nws.noaa.gov/pa/" class="menu">News</a></td>
    <td class="nav" id="menuitem" align="right" width="20%">
      <a href="https://weather.gov/organization.php" class="menu">Organization</a></td>
    <td class="yellow" align="right" width="20%">
      <form action="https://www.firstgov.gov/fgsearch/index.jsp" name="query">
        <label for="search">Search</label>&nbsp;</td>
    <td align="left" class="searchinput" width="20%" nowrap>
      <input type="hidden" name="parsed" value="true">
      <input type="hidden" name="rn" value="3">
      <input type="hidden" name="in0" value="domain">
      <input type="hidden" name="dom0" value="nws.noaa.gov, weather.gov, wrh.noaa.gov, srh.noaa.gov, crh.noaa.gov, prh.noaa.gov, arh.noaa.gov, alaska.net/~nwsar, erh.noaa.gov, ncep.noaa.gov, wwb.noaa.gov, spc.noaa.gov, nhc.noaa.gov, sec.noaa.gov, aviationweather.gov, aviationweather.noaa.gov, weather.noaa.gov, roc.noaa.gov, nohrsc.nws.gov, nwstc.noaa.gov, wdtb.noaa.gov, npmoc.navy.mil, ndbc.noaa.gov">
      <input type="text" name="mw0" value="All NWS Search" id="search" size="20" maxlength="256">
      <input type="submit" name="Go2" value="Go"></td>
    <td width="10%">&nbsp;</form></td>
    <td align="right" valign="bottom" width="24"><img height="23" alt="" src="/nwscwi/navbarendcap.jpg"
 width="24" border="0"></td>
  </tr>
</table>
<table cellspacing="0" cellpadding="0" width="670" border="0">
  <tr valign="top">
    <td width="137"><br>
      <table cellspacing="0" cellpadding="2" width="137" border="0">
        <!-- Do not remove this section. You will need this when the City,St/zip search is implemented nationwide.-->
        <!-- <tr align="left" valign="top">
                <td class="searchinput">
                  <div id="Layer2" style="position:absolute; width:200px; height:115px; z-index:2; visibility: hidden">Search by city or zip code. Press enter or select the go button to submit request</div>
                  <form method="POST" action="https://www.srh.noaa.gov/zipcity.php">
                  <span class="yellow">Local forecast by<br>&quot;City, St&quot; or Zip Code</span><br>
                  <input type="text" name="inputstring" size="9" value="City, St">
                  <input type="submit" name="Go2" value="Go"></form></td>
        </tr> -->
         <tr>
          <td class="searchinput" align="left">
            <form action="https://www.firstgov.gov/fgsearch/index.jsp" name="query">
             <label for="search"><span class="yellow">CPC Search</span></label>
              <input type="hidden" name="parsed" value="true">
              <input type="hidden" name="rn" value="3">
              <input type="hidden" name="in0" value="domain">
              <input type="hidden" name="dom0" value="www.cpc.ncep.noaa.gov">
              <input type="text" name="mw0" id="search"  size="10" maxLength="256" value="CPC search">&nbsp;
              <input type="submit" name="Go2" value="Go">
          </form></td>
         </tr>
        <tr>
          <td class="white">
            <span class="yellow">About Us</span><br>
            &nbsp;&nbsp;&nbsp;<a href="/information/who_we_are/mission.html" class="menu">Our Mission</a><br>
            &nbsp;&nbsp;&nbsp;<a href="/information/who_we_are/" class="menu">Who We Are</a><br><br>
            <span class="yellow">Contact Us</span><br>
            &nbsp;&nbsp;&nbsp;<a href="/information/personnel/contacts.html" class="menu">CPC Information</a><br>
            &nbsp;&nbsp;&nbsp;<a href="/comment-form.html" class="menu">CPC Web Team</a><br><br>           
          </td>
        </tr>
      </table>
    </td>
    <td valign="top" align="center" width="533"><a name="contents"></a>

<!-- Begin content area -->

<table border="0" cellPadding="2" cellSpacing="0" align="center" width="533">
 <tr><td>&nbsp;</td></tr>
 <tr>
  <td>
   <font face="Verdana,arial,serif" size="1"><a href="/index.html" class="homepagelinks"><strong>HOME</strong></a> &gt; <a href="/products/monitoring_and_data" class="homepagelinks">Monitoring_and_Data</a> &gt; <a href="/products/monitoring_and_data/oadata.html" class="homepagelinks">Oceanic and Atmospheric Data</a> &gt; <a href="/products/wesley/" class="homepagelinks">Reanalysis: Atmospheric Data</a> &gt; wgrib2</font>
  </td>
 </tr>
 <tr><td>&nbsp;</td></tr>
 <tr>
  <td>

<font color=red> <h3 align=center>wgrib2: wgrib for GRIB-2</h3> </font>
<font color=red> <h3 align=center>Utility to read and write grib2 files</h3> </font>

<img height="20" alt="News" src="../icons/new.png" width="60">
<font color=red> 
<a href="https://github.com/NOAA-EMC/wgrib2/releases">wgrib2 moved to github</a>
</font><br>

<h3>News</h3>
<a href="https://github.com/NOAA-EMC/wgrib2/releases">Wgrib2 moved to github</a>.
<p>
Wgrib2 development has been transitioning from a makefile build to a github/CMake build.
This allows future wgrib2 development to be integrated into a the software build/maintanence
system that is used by NCEP and the NOAA R&D HPC systems.  Wgrib2 version 3.3.0 has the
major functionality of wgrib2 v3.1.3. (Ubuntu: IP-7/18/2024?, AEC-yes, JPEG200-no, PNG-no).

<ol> Different
<li> CMake build vs gnu makefile
<li> build does not include independent library sources
<li> questions, bug reports go to the github site
<li> moving development into EMC/NCEP mainstream
</ol>

<ol> Bad
<li> all functionality of wgrib2 v3.1.3 is not present
<li> equal area Lambert projection on aspherical earth is not supported (to do)
<li> creating of libraries for pywgrib2 and wgrib2api not done (to do)
<li> -new_grid of rotated lat-lon grids using WMO templates doesn't work (to do)
<li> many of the build options are not supported (to do)
<li> cannot check for library compatibility
<li> CMake support for unusual platforms vs gnu make?
<li> moving development into EMC/NCEP mainstream: lose independent check on EMC software
</ol>

<ol> Good
<li> future maintenence should be easier
<li> support by multiple people
<li> easier to build on NOAA computers
<li> using a maintained version of ipolates
<li> cleanup of code
<li> unix standard calls to fortran ipolates replaced by standard version
<li> use local installed libraries (ex. netcdf)
<li> moving development into EMC/NCEP mainstream: saving of resources
<li> EMC/NCEP mainstream: EMC could start using wgrib2api<br>
</ol>

<ol> Fixed in v3.3.0 vs v3.1.3
<li> updated NCEP grib table
<li> small_grib: writing the lat/lon values in the metadata used a truncate rather than a round<br>
     angles could be off by 1e-6 of a degree
</ol>

<p>
At this point, we need feedback.  The install documentation is weak.
IF you find something is braken, add it to the issues so it can be
fixed and a test added.


<h3>Introduction</h3>

<p> Wgrib2 is a processor for grib2 files.  It is a utility
and library for manipulating grib files, The utility was designed to be
used to reduce the need for custom Fortran programs to 
read, write and manipulate grib files.
Wgrib2 has the following abilities.

<ul>
<li> inventory and read grib2 files
<li> create subsets
<li> create regional subsets by cookie cutter or projections
<li> export to ieee, text, binary, CSV, netcdf and mysql
<li> import to ieee, text, binary, and netcdf
<li> write of new grib2 fields
<li> parallel processing by using threads (OpenMP)
<li> parallel processing by flow-based programming
</ul>


<p> Wgrib2 is versatile because it's command line is a simple
language.  This makes wgrib2 useful in embedding. 
Some programs that embed wgrib2.

<ul>
<li> <a href="https://www.cpc.ncep.noaa.gov/products/wesley/g2ctl.html">g2ctl</a>
a control maker for <a href="https://www.nws.noaa.gov/cgi-bin/nwsexit.pl?url=https://www.iges.org/grads/">GraADS</a>
<li> <a href="https://www.cpc.ncep.noaa.gov/products/wesley/alt_g2ctl_gmp.html">atl_g2ctl, alt_gmp</a>
alternative versions of g2ctl/gribmap for for
<a href="https://www.nws.noaa.gov/cgi-bin/nwsexit.pl?url=https://www.iges.org/grads/">GraADS</a>
<li> grib-filter/g2subset cgi-bin programs for Nomads (NOAA OperationalModel Archive & Distribution System)
<li> <a href="https://www.cpc.ncep.noaa.gov/products/wesley/g2grb.html">g2grb.gs</a> enables GrADS to write grib2 files
<li><a href="https://www.cpc.ncep.noaa.gov/products/wesley/grb1to2.html">grb1to2.pl</a> grib1 to grib2 converter
<li><a href="https://www.x-plane.com/">Xplane11</a> flight simulator
        <li><a href="https://www.nws.noaa.gov/cgi-bin/nwsexit.pl?url=https://cran.r-project.org/web/packages/rNOMADS/index.html">rNOMADS</a> R interface for NOAA weather data
</ul>




<font color=red>
<h3>OpenMP Configuration</h3>
</font>

<p>
OpenMP is used to speed up wgrib2 by running loops over
multiple cores.  OpenMP is enabled by default for most builds
and you can slow up your machine if you the wrong OpenMP
configuration.

<p>The first configuration is to set up the number of
threads that wgrib2 will use. The default configuration
is set the number of threads equal to the number of
physical cores.  The default is reasonable except for
when your computer becommes becomes
unresonsive.  For a 4 core CPU, I set the number of threads
to be 3, so I another core to handle other work.
</p>

<pre>
export OMP_NUM_THREADS=3
</pre>

<p>The next OpenMP configuration is how to handle unused threads (cores).
By setting OMP_WAIT_POLICY to PASSIVE,
unused cores are made availible to to work on other tasks.
Setting OMP_WAIT_POLICY to ACTIVE, will not share the cores.
In kindergarten, you learned the value of sharing.
</p>
<pre>
export OMP_WAIT_POLICY=PASSIVE
</pre>

<h3>News</h3>
<p>
4/14/2022: wgrib2 v3.1.1 is released
<ul> Changes for wgrib2 v3.1.1
<li> fixes check_pdt_len for some ECMWF and ICON files with vertial coordinates
<li> fixes -unix_time because of glibc
<li> more support for unix time: -set_date, -import_netcdf
<li> tested: gcc/gfortran on Ubuntu 20.04, Redhat 7
<li> tested: icc/ifort on Redhat 7
<li> tested: AOCC v3.2 (clang, flang) on Ubuntu 20.04
<li> minor tested: Windows 10 using cygwin64
<li> minor tested: gcc/gfortran on Ubuntu 18.04
</ul>

<h3>Usage</h3>

<ul>
<li> each option corresponds to a subroutine call
<li> type wgrib2 to see primary options
<li> inventory format is specified on command line by options
<li> if no "inv" option is specified, -s is used
</ul>


<h3>Joining the development effort</h3>
<ul>
<li>Source code: knowledge of C and some grib-2
<li>Changes to existing source code has to use the same licence as the original code
<li>New code (files) must either be GNU or public domain.
<li> Github?  No. 
<li>Bug reports are important
<li>Some inovations by first time contributors
<ul>
<li> first implementation of lat-lon of common grids
<li> write netcdf files
<li> callable wgrib2  (making wgrib2 a subroutine)
<li> write to mysql files
<li> AEC compression
<li> python interface
</ul>
<li>Contact wesley.ebisuzaki@noaa.gov
</ul>

<h3>Contributions by</h3>
<ul>
<li> Wesley Ebisuzaki: many modules
<li> Reinoud Bokhorst: tosubmsg, checksum 
<li> DWD (Gregor Schee, Daniel Lee and others): AEC compression
<li> Jaakko Hyv&auml;tti: gribtab
<li> John Howard: callable wgrib2
<li> Dusan Jovic: staggered grids, proj4 code
<li> Kristian Nilssen: netcdf module
<li> Karl Pfeiffer: georeferencing
<li> Pablo Romero: unix_time
<li> Manfred Schwarb: many modules
<li> Arlindo da Silva: openGrADS, bbox
<li> Niklas Sondell: mysql module
<li> Sam Trahan: satellite tables
<li> George Trojan: python interface, improvements to wgrib2api
<li> Sergey Varlamov: netcdf module improvements, georeferencing updates
<li> thanks to the people who report the bugs and more who provide the fixes!
</ul>

<h3>Documentation</h3>
<ul>
<li><a href="./problems.html">problems-error message</a>
<li><a href="https://www.ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/grib1-grib2v3.pptx">Slides for talk to CUNY students 6/2016: grib1/grib2</a>
<li><a href="https://www.ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/intro_grib2.pdf">intro_grib2.pdf using GFS fcst</a>
<li><a href="./default_inv.html">Understanding the default inventory</a>
<li><a href="./convert_wgrib2.html">converting from wgrib to wgrib2 in scripts</a>
<li><a href="https://www.cpc.ncep.noaa.gov/products/outreach/seminars/CPC/archive/grib2_wgrib2.ppt">Powerpoint presentation</a> 4/6/2011 at NCEP 
<li><a href="https://www.ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/wgrib2_changes_2012-2015.pdf">
Changes in wgrib2 from 5/2012 to 1/2015 (pdf)</a>
<li><a href="./submessages.html">submessages</a>
<li><a href="./function.html">writing a simple function</a>
<li><a href="./selecting_messages.html">selecting fields to decode</a>
<li><a href="./types.html">option types: init inv out misc</a>
<li><a href="./bin_ieee_text_format.html">bin, ieee, text format</a>
<li><a href="./small_fast_databases.html">small fast databases</a>
<li><a href="./usage_questions.html">usage questions</a>
<li><a href="./pipes.html">using pipes</a> and <a href="./for_n.html">multiprocessing</a>
<li><a href="./compile_questions.html">compile questions</a>
<li><a href="./limitations.html">limitations</a>
<li><a href="./speed.html">make wgrib2 faster</a>
<li><a href="./calling_wgrib2.html">calling wgrib2 from C</a>
<li><a href="./user_grib2tables.html">user defined grib tables</a>
<li><a href="./special_file_names.html">special files</a>
<li><a href="https://www.ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/tricks.wgrib2">some tricks</a>
<li><a href="https://www.ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/tricks.ncep">some tricks for NCEP users</a>
<li><a href="https://www.ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/tricks.cheap">one-line tricks</a>
</ul>
<h3>The  options</h3>
<ul>
<li><a href="./short_cmd_list.html">the common options</a>
<li><a href="./long_cmd_list.html">all the commands</a>
</ul>

<h3>Some solutions</h3>
<ul>
<li> <a href="./time_interpolation.html">Time interpolation of two grib files</a>
<li> interpolation to new grid: <a href="./new_grid.html">new_grid</a>, <a href="./lola.html">Lat-Lon nearest neighbor</a>, 
<a href="./cress_lola.html">Lat-Lon by Cressman</a>
<li> CSV (comman separated value) file: <a href="./csv.html">-csv</a>, <a href="./spread.html">-spread</a>
<li> <a href="https://ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/Windows10/">Windows_10 version of wgrib2</a>
<li> <a href="./ave.html">Fast averaging</a>
</ul>

<h3>Selecting Fields/Records/Message</h3>
<h4>Select/Ignore by name/level/time/etc</h4>
<ul>
<li><a href="./match.html">-match</a> process records that match a posix extended regular expression
<li><a href="./not.html">-not</a> process records not matching a regular expression
<li><a href="./match_inv.html">-match_inv</a> the inventory used by -match and -not
<li><a href="./i.html">-i</a> reads inventory from stdin for record selection
</ul>

<h4>Select by number (better to use previous method)</h4>
<ul>
<li><a href="./d.html">-d</a> dump specific record
<li><a href="./for.html">-for</a> select a range of records to process (nth message)
<li><a href="./for_n.html">-for_n</a> select a range of records to process (nth message/submessage)
</ul>

<h4>Selective Processing: if options</h4>
<p>
After selecting the fields to process, you can refine the processing by
the "if" options. With wgrib2 v3.0.0, the <a href='./if.html'>IF</a>
structure was improved.  Scripts that used the older IF structure still work;
however, the new IF structure is easier to read.

<p>If possible, it is better to use the match options than the if options.
The -match/-not options prevent unwanted records from being processed which
saves time over the if options which process the fields.

<h3>Individual Grid Point Data</h3>
<ul>
<li><a href="./ij.html">-ij</a> print value at grid point (i, j)
<li><a href="./ijlat.html">-ijlat</a> print lat, lon, value at grid point (i, j)
<li><a href="./ilat.html">-ilat</a> print lat, lon, value of Nth grid point
<li><a href="./lon.html">-lon</a> prints the lat-lon, and value of the grid point nearest the specified lat-lon
<li><a href="./stats.html">-max</a> prints the maximum value
<li><a href="./stats.html">-min</a> prints the minimum value
<li><a href="./stats.html">-stats</a> prints some statistics about the fields
<li><a href="./macros.html">-V</a> verbose inventory (shows stats)
</ul>


<h3>Regridding, Interpolating to new grids</h3>

<p> Wgrib2 has the ability to convert grib files from one grid
to another.  The conversion uses a user-selected interpolation
scheme: bilinear (default), bicubic, nearest neighbor, budget, and spectral.
The supported grids include lat-lon, gaussian, Lambert conformal, polar stereographic,
and WMO-defined rotated lat-lon grid.  This capability uses the NCEP IPOLATES2 library
and is an optional package. 

<p> Note: the interpolation uses scalar and vector interpolation
schemes.  For the vector quantities the V field must immediately
follow the corresponding U field.

<ul>
<li><a href="./new_grid.html">new_grid</a>
<li><a href="./new_grid_interpolation.html">-new_grid_interpolation</a> set interpolation type used by -new_grid
<li><a href="./wgrib2m.html">wgrib2m</a> fast regrid using multiple processes

</ul>


<h3>Exporting data to other programs</h3>
<ul>
<li><a href="./netcdf.html">-netcdf</a>: write data in netcdf format
<li> -mysql: export data to a mysql database
<li> -mysql_speed: export data to a mysql database
<li><a href="./spread.html">-spread</a>: write data for spreadsheets
<li><a href="./csv.html">-csv</a>: write in column separated values, another one for spreadsheets
<li><a href="./text.html">-text</a>: data in text format
<li><a href="./bin.html">-bin</a>: data native binary floating point
<li><a href="./ieee.html">-ieee</a>: data in big endian IEEE format
<li><a href="./ijbox.html">-ijbox</a>: write a rectangular grid of data
<li><a href="./AAIG.html">-AAIG</a>: arcinfo ascii grid, GIS
</ul>

For a short list of options, type "wgrib -h"<br>
For a complete list, type "wgrib -help all"<br>
To search for an option, type "wgrib -help keyword"<br>

<h3>Writing grib2</h3>

Wgrib2 has adopted the template approach for writing grib.  You
have a sample grib2 message (template), and you modify the grid point values
and metadata to create a new grib message that you can write.
This is similar to how ECMWF's ECCodes writes grib.  The other approach
is to supply many parameters to create a grib message which is used
by NCEP's g2 library.

<ol>
<li> from wgrib2 <a href='./gribify2.html'>command line</a>
<li> from GrADS using <a href="../g2grb.html">g2grb.gs</a>
<li> fron python using <a href='./pywgrib2_s_write.html'>write</a>
<li> from fortran using <a href='./grb2_wrt.html'>grb2_write</a>
</ol>



<h3>Machines able to run wgrib2</h3>

<ul> 64-bit with IPOLATES
<li> Redhat 7 Enterprise: gcc/gfortran (primary development system)
<li> Redhat 7 Enterprise: gcc/gfortran, icc/ifortran
<li> SUSE Enterprise: gcc/gfortran, icc/ifortran
<li> Ubuntu 20.04: gcc/gfortran (primary development system)
<li> Ubuntu 20.04: AOCC's clang and flang  (development system) with OpenJPEG
<li> Ubuntu 20.04: nvidia with OpenJPEG
<li> ARM: needed to be compiled with USE_NETCDF4=1, USE_JASPER=0 (old report)
<li> Redhat linux: 32-bit with IPOLATES, not tested recently, use netcdf4 (old report)
<li> Mandriva linux (old report)
<li> AIX: use makefile, some fiddling with libraries is necessary, not tested recently
<li> Solaris, needs gnu make and gcc (old report)
<li> Solaris-10 (old report)
<li> HPUX, needs changes to makefiles (old report)
<li> Windows: using Cygwin system produces 32-bit binaries (old report)
<li> Windows: using Cygwin system produces 64-bit binaries
<li> Windows: compiled MingW (not recent), Watcom C, icc/ifort (old report)
<li> Windows/linux subsystem (ubuntu): compiled with gcc/gfortran (old report)
<li> Intel-based Mac using gcc and gfortran
</ul>

The makefile works on Redhat and Ubuntu (with needed installed options).
For other systems, you may have to modify the makefile.  The makefile
requires gnu make which is a common version of make.

<h3>System dependencies: 32 vs 64 bit, big vs little endian, Windows vs Linux/UNIX</h3>

<p>
The wgrib2 source code is written to be portable; there are no
issues with big vs little endian or the size of the integer as
long as it is 32 bits or more.  The source code is written in
ANSI/ISO C (C89), with optional features that require
POSIX or POSIX-2.  There has been a debate about 
moving the base rquirements to C99.

<ul>
<li> big vs little endian: either works
<li> 32-bit machine: files limited to 2GB files, netcdf3 may not work
<li> Windows: 2GB+ files with 64-bit cygwin, 2GB with other windows C compilers
<li> Windows: only 64-bit cygwin is supported
<li> POSIX: all POSIX code is optional. Regex support is POSIX and useful.
<li> JPEG2000: OpenJPEG library or Jasper library
</ul>


<h3>Source Code and Compling Hints</h3>
<p>
The wgrib2 source code is written to the POSIX-2 standard.  Features requiring
POSIX2, such as regular expressions, can usually be turned off
in the makefile.  The wgrib2 code can be compiled with 32 or 64 bit pointers and integers.
However, the code has to be compiled in a like manner for all the libraries.
Some packages are optional (netcdf, mysql) and enabling these options can really
increase the executable size.  
</p>

<p>
While compiling wgrib2, you may see warnings about unknown pragmas.  Pragmas
are "comments" that are used when compiling an OpenMP version of the code.  The
default is to compile with OpenMP turned on.
</p>

<p>
2/2019: The HDF5 library has problems being compiled with newer gcc compilers.
The only consisten method of adding NetCDF4 to wgrib2 is by using old compilers
(RedHat 6) or using the Intel compilers.  The work around to enable NetCDF3 support
and use an external utility to convert the files to Netcdf4.

<p>
NetCDF3 has problem being compiled on 32-bit machines.
</p>

<ul>
<li> <a href="https://www.ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/">Source code</a>
<li><a href="https://www.ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/_README">_README</a>
<li><a href="https://ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/Changes">Change log</a>
<li><a href="./compile_questions.html">compiling directions and questions</a>
<li> <a href="https://www.ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/wgrib2.tgz">wgrib2.tgz</a>
<li> <a href="https://bovineaerospace.wordpress.com/2017/08/20/how-to-install-wgrib2-in-osx/">
OS-X installation by author of rNOMADS</a> using gcc and OS-X
</ul>

<h3>Precompiled code from External Sites</h3>
<p>
There are many sites with precompiled versions of wgrib2.  This list
is neither exhaustive nor an endorsement of the sites.  I have
not tested the wgrib2 executables from these sites and YMMV.

<ul>
<li><a href="https://www.nws.noaa.gov/cgi-bin/nwsexit.pl?url=https://opengrads.org/">OpenGrads:</a>
Darwin, Freebsd, Linux, Windows(cygwin)
<li><a href="https://www.nws.noaa.gov/cgi-bin/nwsexit.pl?url=https://fedoraproject.org">
Fedora Project</a>
<li><a href="https://www.nws.noaa.gov/cgi-bin/nwsexit.pl?url=https://download.opensuse.org/repositories/home:/gbvalor/">
RPMs:</a> Centros, Fedora, OpenSUSE, RedHat, SUSE
<li><a href="https://www.nws.noaa.gov/cgi-bin/nwsexit.pl?url=https://trac.macports.org/browser/trunk/dports/science/wgrib2/Portfile">
MacPorts</a>
</ul>

<h3>Status</h3>
<p>
The wgrib2 is used operationally in the NCEP production suite.
</p>

<p>
<a href="https://www.ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/Changes">Change logfile</a>
</p>

<h3>Changes</h3>
<p> Prior to wgrib2 v3.1.0, chemical and aerosol names were from the NCO web table for Code Table 4.30.
For wgrib2 v3.1.0+, the names are from the WMO names for CCT14.  Expect differences.  For example,
"Total Aerosol" became "Total aerosol", and "Carbon Monoxide" became "Carbon monoxide".  If you use 
for "Carbon ]mM]onoxide", it will work with both -if and -match.


<h3>Bugs</h3>

<p> Please report bugs to wesley.ebisuzaki@noaa.gov. When you report bugs,
try to make them reproducible on a linux machine and include sample data.

<p> The long time practice was not to port bug fixes to older versions of
wgrib2.  As of June 23, 2023, the official policy is not to backport bug fixes
to older versions of wgrib2, especially versions that are over 4 year old,
and 5 public releases ago.   As of June 23, 2023, a recent CMake is necessary
to compile some default library/libraries used by wgrib2.  Wgrib2 can be
compiled without the libraries and avoiding the use of CMake. 

	<h3>Distribution</h3>
	<p>
	The source code modules for wgrib2 are either in the public domain or under the GNU
	licence depending on the authors of the various modules.  Wgrib2 uses libraries that
	are in the public domain, under various GNU licences, the Image Power JPEG-2000 Public Licence*, 
	libpng licence*, the zlib licence*, the netcdf licence*, HDF5 licence*, MySQL licence* and perhaps others.  How 
	about one licence to rule them all?
	<p>
	* optional package
	</p>
	</td>
	</tr>


	<!--  End of Content area  -->
	<!--   ...............................................Footer Portion.........................................    -->
	 <tr>
	  <td>
	   <table width="500">
	    <tr>
	     <td colSpan="3"><hr></td>
	    </tr>
	    <TR vAlign="top">
	     <TD class="gray">
	      <A href="https://www.noaa.gov/" class="homepagelinks"><SPAN class="gray">NOAA/</SPAN></A>
	      <A href="https://www.nws.noaa.gov/" class="homepagelinks"><SPAN class="gray">National Weather Service</SPAN></A><BR>
	      <A href="https://www.ncep.noaa.gov/" class="homepagelinks"><SPAN class="gray">National Centers for Environmental Prediction</SPAN></a><BR>
		Climate Prediction Center<BR>
		5830 University Research Court<BR>
		College Park, Maryland 20740<BR>
	      <A href="/comment-form.html" class="homepagelinks"><SPAN class="gray">Climate Prediction Center Web Team</SPAN></A><BR>
		Page modified: 12/29/2016, 10/2/2020, 4/2024
	     </TD>
	     <TD>
	      <A href="https://weather.gov/disclaimer.php" class="homepagelinks"><SPAN class="gray">Disclaimer</SPAN></A>
	     </TD>
	     <TD align="right">
	      <A href="https://weather.gov/privacy.php" class="homepagelinks"> <SPAN class="gray">Privacy Policy</SPAN></A>
	     </TD>
	    </TR>
	   </table>
	  </td>
	 </tr>
	</table>
	</td>
	</tr>
	</table>
	</body>
	</html>

