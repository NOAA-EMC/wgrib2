<!iOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>Climate Prediction Center - pywgrib2: write(..)</title>
  <meta http-equiv=Content-Type content="text/html; charset=windows-1252">
  <meta content="NCEP Web Team" name="GENERATOR">
  <meta name="keywords"
  content="Climate,Climate Prediction Center,National Weather Service,National Oceanic &amp; Atmospheric Administration, NOAA,El Nino,La Nina,ENSO,climate outlooks,El Nino Advisory,La Nina Advisory,droughts,hurricanes,Threats Assessment,Drought Assessment,Drought Monitor,CLimate Diagnostics Bulletin,6-10 day outlook,8-14 day outlook, 6-10 day forecast,8-14 day forecast,MRF,UV Index,North Atlantic Oscillation,NAO,Pacific Decadal Oscillation,PDO,sea surface temperatures,SST,Palmer Drought Severity Index, African Desk,outlooks,expert assessments,monitoring,advisories,stratosphere,temperature,precipitation,snow cover,snowfall,soil moisture,OLR,ozone,degree days,CLIMATE,CLIMATE PREDICTION CENTER,EL NINO,LA NINA, CLIMATE OUTLOOKS,HURRICANES,ASSESSMENTS,SNOW,STRATOSPHERE,DROUGHT,OZONE,DEGREE DAYS">
  <link href="/nwscwi/main.css" type="text/css" rel="STYLESHEET">
</head>
<body leftmargin="0" background="/nwscwi/background.gif" 
      topmargin="0" rightmargin="0" marginheight="0" marginwidth="0">
<table cellspacing="0" cellpadding="0" width="100%" background="/nwscwi/topbanner.jpg" border="0">
  <tr>
    <td align="right" height="19">
      <a href="#contents"><img height="1" alt="Skip Navigation Links"
         src="/nwscwi/skipgraphic.gif" width="1" border="0"></a>
      <a href="https://www.nws.noaa.gov/" class="homepagelinks"><span class="nwslink">www.nws.noaa.gov</span></a>&nbsp;</td>
  </tr>
</table>
<table cellspacing="0" cellpadding="0" width="100%" border="0">
  <tr>
    <td rowspan="2"><a href="https://www.noaa.gov/">
      <img height="78" alt="NOAA logo - Click to go to the NOAA home page"
      src="/nwscwi/noaaleft.jpg" width="85" border="0"></a></td>
    <td align="left"><img height="20" alt="National Weather Service"
      src="/nwscwi/nws_title.jpg" width="500" border="0"></td>
    <td rowspan="2" width="100%" background="/nwscwi/ncep_bkgrnd.jpg">&nbsp;</td>
    <td rowspan="2" align="right"><a href="https://www.nws.noaa.gov/">
      <img height="78" alt="NWS logo - Click to go to the NWS home page"
      src="/nwscwi/nwsright.jpg" width="85" border="0"></a></td>
  </tr>
  <tr>
    <td><img height="58" alt="Climate Prediction Center" src="/nwscwi/cpc.jpg"
             width="500" border="0"></td>    <!-- Put your center header image here. -->
  </tr>
</table>
<table cellspacing="0" cellpadding="0" width="100%" background="/nwscwi/navbkgrnd.gif" border="0">
  <tr>
    <td align="left" valign="top" width="94"><img height="23" alt="" src="/nwscwi/navbarleft.jpg" width
="94" border="0"></td>
    <td class="nav" align="center" width="15%">
      <a href="/products/site_index.html" class="menu">Site Map</a></td> <!-- Build a text only sitemap, and link to it via this
                                                    sitemap button just below the banner.
                                                    The sitemap should include a heirarchy of links
                                                    from NOAA, to the NWS, to NCEP, and then through your site. -->
    <td class="nav" align="right" width="15%">
      <a href="https://www.nws.noaa.gov/pa/" class="menu">News</a></td>
    <td class="nav" id="menuitem" align="right" width="20%">
      <a href="https://weather.gov/organization.php" class="menu">Organization</a></td>
    <td class="yellow" align="right" width="20%">
      <form action="https://www.firstgov.gov/fgsearch/index.jsp" name="query">
        <label for="search">Search</label>&nbsp;</td>
    <td align="left" class="searchinput" width="20%" nowrap>
      <input type="hidden" name="parsed" value="true">
      <input type="hidden" name="rn" value="3">
      <input type="hidden" name="in0" value="domain">
      <input type="hidden" name="dom0" value="nws.noaa.gov, weather.gov, wrh.noaa.gov, srh.noaa.gov, crh.noaa.gov, prh.noaa.gov, arh.noaa.gov, alaska.net/~nwsar, erh.noaa.gov, ncep.noaa.gov, wwb.noaa.gov, spc.noaa.gov, nhc.noaa.gov, sec.noaa.gov, aviationweather.gov, aviationweather.noaa.gov, weather.noaa.gov, roc.noaa.gov, nohrsc.nws.gov, nwstc.noaa.gov, wdtb.noaa.gov, npmoc.navy.mil, ndbc.noaa.gov">
      <input type="text" name="mw0" value="All NWS Search" id="search" size="20" maxlength="256">
      <input type="submit" name="Go2" value="Go"></td>
    <td width="10%">&nbsp;</form></td>
    <td align="right" valign="bottom" width="24"><img height="23" alt="" src="/nwscwi/navbarendcap.jpg"
 width="24" border="0"></td>
  </tr>
</table>
<table cellspacing="0" cellpadding="0" width="670" border="0">
  <tr valign="top">
    <td width="137"><br>
      <table cellspacing="0" cellpadding="2" width="137" border="0">
        <!-- Do not remove this section. You will need this when the City,St/zip search is implemented nationwide.-->
        <!-- <tr align="left" valign="top">
                <td class="searchinput">
                  <div id="Layer2" style="position:absolute; width:200px; height:115px; z-index:2; visibility: hidden">Search by city or zip code. Press enter or select the go button to submit request</div>
                  <form method="POST" action="https://www.srh.noaa.gov/zipcity.php">
                  <span class="yellow">Local forecast by<br>&quot;City, St&quot; or Zip Code</span><br>
                  <input type="text" name="inputstring" size="9" value="City, St">
                  <input type="submit" name="Go2" value="Go"></form></td>
        </tr> -->
         <tr>
          <td class="searchinput" align="left">
            <form action="https://www.firstgov.gov/fgsearch/index.jsp" name="query">
             <label for="search"><span class="yellow">CPC Search</span></label>
              <input type="hidden" name="parsed" value="true">
              <input type="hidden" name="rn" value="3">
              <input type="hidden" name="in0" value="domain">
              <input type="hidden" name="dom0" value="www.cpc.ncep.noaa.gov">
              <input type="text" name="mw0" id="search"  size="10" maxLength="256" value="CPC search">&nbsp;
              <input type="submit" name="Go2" value="Go">
          </form></td>
         </tr>
        <tr>
          <td class="white">
            <span class="yellow">About Us</span><br>
            &nbsp;&nbsp;&nbsp;<a href="/information/who_we_are/mission.html" class="menu">Our Mission</a><br>
            &nbsp;&nbsp;&nbsp;<a href="/information/who_we_are/" class="menu">Who We Are</a><br><br>
            <span class="yellow">Contact Us</span><br>
            &nbsp;&nbsp;&nbsp;<a href="/information/personnel/contacts.html" class="menu">CPC Information</a><br>
            &nbsp;&nbsp;&nbsp;<a href="/comment-form.html" class="menu">CPC Web Team</a><br><br>           
          </td>
        </tr>
      </table>
    </td>
    <td valign="top" align="center" width="533"><a name="contents"></a>

<!-- Begin content area -->

<table border="0" cellPadding="2" cellSpacing="0" align="center" width="533">
 <tr><td>&nbsp;</td></tr>
 <tr>
  <td>
   <font face="Verdana,arial,serif" size="1"><a href="/index.html" class="homepagelinks"><strong>HOME</strong></a> &gt; <a href="/products/monitoring_and_data" class="homepagelinks">Monitoring_and_Data</a> &gt; <a href="/products/monitoring_and_data/oadata.html" class="homepagelinks">Oceanic and Atmospheric Data</a> &gt; <a href="/products/wesley/" class="homepagelinks">Reanalysis: Atmospheric Data</a> &gt; pywgrib2: write(..)</font>
  </td>
 </tr>
 <tr><td>&nbsp;</td></tr>
 <tr>
  <td>
<font color=red>
<h3 align=center>pywgrib2: write</h3>
</font>


<h3>Introduction</h3>

<p>
The routine pywgrib2_s.write(..) writes a grib message to a file or memory file.
To write a grib message, you need a "template", a grib message with
the correct grid and most of the metadata.  Often these templates are created interactively
using wgrib2.  The procedure is to take an existing grib message, and then modify it to 
have the correct grid and metadata.  

<p>
Once you have a template, pywgrib2_s writes grib files by modifying the template by
adding grid point data, changing the date codes, and other metadata. Pywgrib2_s can
not write a grib file from scratch, you always need a template.  Templates are
quite small when you replace the grib point values with zero, with a size often less
than 200 bytes.

<h3>Example</h3>
<pre>
</pre>
<h3>Usage</h3>
<pre>
     a=pywgrib2_s.write(file,template,msg_no [, optional arguments])

     file     = output file
     template = file containing template
     msg_no   = message number of the template, the template cannot be in a submessage

     Optional Arguments

     new_data = None (default)
                ndarray          use grid point data from numpy's ndarrray
     Append   = False            when opening file, make a new file
                True             when opening file, append to the end of the file
     metadata = ''
              = 'METADATA'       sets metadata to 'METADATA', format is given by
                                 https://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/set_metadata.html
     sec0     = None (default)
                byte array       replace grib section 0 with byte array
     sec1     = None (default)
                byte array       replace grib section 1 with byte array
     sec2     = None (default)
                byte array       replace grib section 2 with byte array
     sec3     = None (default)
                byte array       replace grib section 3 with byte array
     sec4     = None (default)
                byte array       replace grib section 4 with byte array
     sec5     = None (default)
                byte array       replace grib section 5 with byte array
     sec6     = None (default)
                byte array       replace grib section 6 with byte array
     sec7     = None (default)
                byte array       replace grib section 7 with byte array
     sec8     = None (default)
                byte array       replace grib section 8 with byte array
                                 useless option, included for completeness
     var      = '' (default)
                'NAME'           set grib variable (ex, 'HGT')
                                   uses wgrib2 naming convention
     lev      = '' (default)
              = 'level'          set level to 'level', ex. '2 m above ground', or '500 mb'
                                   uses wgrib2 naming convention
     time0    = None (default)
              = YYYYMMDDHHmmSS   sets reference time to YYYYMMDDHHmmSS
              = YYYYMMDDHH       sets reference time to YYYYMMDDHH (mmSS=0)
     ftime    = '' (default)
              = 'FTIME'          sets the forecast time, ex '12 hour fcst'
                                   uses wgrib2 naming convention
     packing  = '' (default)     simple
                'same'           use same packing as template
                's'              simple
                'simple'         simple
                'c1'             complex type 1
                'complex1'       complex type 1
                'c2'             complex type 2
                'complex2'       complex type 2
                'c3'             complex type 3
                'complex3'       complex type 3
                'a'              AEC packing
                'aec'            AEC packing
                'j'              jpeg2000
                'jpeg'           jpeg2000
                                 Codes written using the NCEP's g2lib and g2clib do not understand AEC packing

     var      = '' (default)
                'NAME'           set grib variable (ex, 'HGT')
                                   uses wgrib2 naming convention
     lev      = '' (default)
              = 'level'          set level to 'level', ex. '2 m above ground', or '500 mb'
                                   uses wgrib2 naming convention
     time0    = None (default)
              = YYYYMMDDHHmmSS   sets reference time to YYYYMMDDHHmmSS
              = YYYYMMDDHH       sets reference time to YYYYMMDDHH (mmSS=0)
     ftime    = '' (default)
              = 'FTIME'          sets the forecast time, ex '12 hour fcst'
                                   uses wgrib2 naming convention
     packing  = '' (default)     simple
                'same'           use same packing as template
                's'              simple
                'simple'         simple
                'c1'             complex type 1
                'complex1'       complex type 1
                'c2'             complex type 2
                'complex2'       complex type 2
                'c3'             complex type 3
                'complex3'       complex type 3
                'a'              AEC packing
                'aec'            AEC packing
                'j'              jpeg2000
                'jpeg'           jpeg2000
                                 Codes written using the NCEP's g2lib and g2clib do not
                                   handle AEC packing.
                                 Codes written using the NCEP's g2lib and g2clib will have
                                   problems with complex packing if they haven't been 
                                   programmed to handle undefined grid points without a bitmap.
     pdt     = None (default)
               integer           Product Definition Template (code table 4.0) is set to integer
                                 see https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table4-0.shtml
     d_scale = None (default)    decimal scaling for packing
               'same'
               (integer)
     b_scale = None (default)    binary scaling for packing
               'same'
               (integer)
                                 if d_scale and b_scale are not defined, the wgrib2 default value is used
                                      12 bits of binary precision (ECMWF style)
                                 If d_scale or b_scale is set to 'same' then
                                      -set_scaling same same is done.
                                 If d_scale or b_scale are not None
                                      if d_scale is None then d_scale = 0
                                      if b_scale is None then b_scale = 0
                                      -set_scaling d_scale b_scale is done.
                                 If d_scale and b_scale are None, then default wgrib2 scaling is used
                                      This is 12 bits binary in ECMWF style precision.
                                 See https://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/
                                          set_scaling.html
</pre>

<ol>Order of setting values
<li> template
<li> secN
<li> pdt
<li> metadata
<li> time0, var, lev, ftime, packing
</ol>


<p>
<a href='./pywgrib2_s.html'>overview</a>
<a href='./pywgrib2_s_inq.html'>back</a>
<a href='./pywgrib2_s_close.html'>next</a>


</td>
</tr>


<!--  End of Content area  -->
<!--   ...............................................Footer Portion.........................................    -->
 <tr>
  <td>
   <table width="500">
    <tr>
     <td colSpan="3"><hr></td>
    </tr>
    <TR vAlign="top">
     <TD class="gray">
      <A href="https://www.noaa.gov/" class="homepagelinks"><SPAN class="gray">NOAA/</SPAN></A>
      <A href="https://www.nws.noaa.gov/" class="homepagelinks"><SPAN class="gray">National Weather Service</SPAN></A><BR>
      <A href="https://www.ncep.noaa.gov/" class="homepagelinks"><SPAN class="gray">National Centers for Environmental Prediction</SPAN></a><BR>
        Climate Prediction Center<BR>
        5830 University Research Court<BR>
        College Park, Maryland 20740<BR>
      <A href="/comment-form.html" class="homepagelinks"><SPAN class="gray">Climate Prediction Center Web Team</SPAN></A><BR>
        Page last modified: 2/2023
     </TD>
     <TD>
      <A href="https://weather.gov/disclaimer.php" class="homepagelinks"><SPAN class="gray">Disclaimer</SPAN></A>
     </TD>
     <TD align="right">
      <A href="https://weather.gov/privacy.php" class="homepagelinks"> <SPAN class="gray">Privacy Policy</SPAN></A>
     </TD>
    </TR>
   </table>
  </td>
 </tr>
</table>
</td>
</tr>
</table>
</body>
</html>
